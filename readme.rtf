Парсер для сайтов вендоров

Журнал разработки
07.07.2021 
Готова релизная версия 1.1: доработан графический интерфейс. Добавлена возможность парсинга одной страницы по артикулу позиции бренда. Парсер отправлен инженерам технического отдела.


08.07.2021 
Проверяю работу парсера и удобство внесения описания на примере брендов DKC и SE. Ищу возможные баги. Проблем не выявлено. Сформированы планы по развитию парсера до конца месяца. 


09.07.2021 
Разработана основа парсера для сайта Bolid. Проверена на двух страницах: работает корректно. Технические характеристики выгружаются корректно только в виде таблицы. Далее переработаю графический интерфейс и добавлю в него парсер болида


12.07.2021 
Доработан парсер сайта Болид. Переработан графический интерфейс с добавлением парсера Болида. Парсер работает по прямой ссылке на страницу продукта, так как сформировать автоматический парсер будет очень трудоёмко: сайт болида имеет сложную для автоматического парсера структуру.


13.07.2021 
Бренд Cabeus. Столкнулся с проблемой, что на сайте структура описаний сильно пляшет от позиции к позиции. Простой забор голого html даёт посредственный результат: форматирование выходит некрасивое и не информативное. Кроме этого, в структуре описания постоянно попадаются изображения, что дополнительно ломает отображение текста при взятии голого html. Вариант фильтрации контента по шаблону тоже вызывает сложности, так как шаблон для каждой страницы может быть свой. Пока остановил разработку этого бренда и перешёл к D-link.


14.07.2021 
Бренд D-link. Особенность этого сайта в том, что страница сайта имеет вид: https://dlink.ru/ru/products/16/1802.html Где 16 –  код раздела продукта (не играет роли) 1802 – код продукта. Код продукта никак не коррелирует ни с чем. Методом тыка удалось определить, что страницы с продуктами имеют коды в пределах 1721…2554. Также нужно отметить, что информация на сайте имеет разрозненную структуру: на одних страницах это простое перечисление свойств в виде маркированного списка, на других - простая таблица, на третьих - таблица с тремя и более столбцами, что делает крайне трудным автоматический сбор информации и оформлению её в удобном виде. Пришлось собирать информацию "как есть" и сохранять её в html-файл. Некоторые страницы могут выглядеть не очень красиво.


15.07.2021 
Бренд Mikrotik. Парсер готов. Страницы сайта mikrotik.com различаются по названию в зависимости от позиции, что не даёт возможности парсить массово, только по прямой ссылке. Кроме того, так как информация на сайте на английском языке, парсер автоматически переводит содержимое страницы на русский язык при помощи Google Translate. По Cabeus и Legrand парсер сделать, вероятнее всего, не получится: в первом случае на сайте такая каша из форматированного текста, которую красиво перенести в html не выходит. Во втором случае электронный каталог имеет сложную структуру ссылки, которую трудоёмко автоматизировать. Отложил эти бренды на потом.


22.07.2021 
Бренд Ubiquiti. Парсер готов. Парсится русскоязычный сайт http://www.ubnt.su/ по прямой ссылке. Это не официальный сайт производителя, но в нём информации больше и перевод сделан качественно. Полагаю, этого будет достаточно Парсинг осуществляется только по прямой ссылке: автоматически парсить нет возможности из-за неочевидного формирования адреса ссылки на страницу продукта. 


26.07.2021 
Бренд Phoenix Contact. Парсинг забуксовал со старта: похоже, их сайт блокирует парсеры, так как при запросе страницы по URL, парсер зависает на этапе получения ответа от страницы. Возможно, у них есть какие-то механизмы распознавания парсера и блокировки его на раннем этапе, либо какая-то хитрая переадрессация. Бренд Rittal добавлен в приложение.


05.08.2021 
Бренд Optimus. Парсер готов Особенность работы с этим брендом: использование в качестве референса не прайса, а файла XML, который они предоставляют для работы: https://optimus-cctv.ru/full-market.php
Из данного файла собирается вся информация по актуальному каталогу (на текущий момент это около 300 позиций) и сохраняется в папку RESULT. Информация включает в себя: наименование, партномер, изображение и файлы pdf, а также ссылка на сайт вендора, откуда обычным парсером собираются описание: особенности и технические характеристики, которые сохраняются в файл html. Кроме массового внесения, сделал также сбор информации и файлов со страницы по прямой ссылке.

10.08.2021
Бренд Wago. При разработке столкнулся с проблемой вычленения нужного мне текста из страницы сайта. Текст спрятан под тегом script и просто так вытянуть его не получается. Пробовал отфильтровать содержимое регулярными выражениями, но пока не получается удобоваримого содержания. В процессе поиска решения нашёл вариант библиотеки, с помощью которой можно решить проблему парсинга сайта Phoenix Contact. Вернулся к разработке парсера для него.

13.08.2021 
Вернулся к бренду Phoenix Contact и всё удалось с применением библиотеки, которая использует непосредственно браузер Chrome для получения страницы. Парсить данные реальным браузером несколько дольше, однако это стало возможным. Удалось также найти более-менее полный прайс Phoenix Contact на каком-то российском сайте и использовать этот прайс как референс для партномеров продукции.
Единственное, что не удалось – собирать файлы pdf, так как сайт перед загрузкой файлов требует установить галочку и нажать на кнопку. Вроде бы решение, позволяющее кликать браузером по кнопкам автоматически есть, но решил пока не тратить времени на это и остановится на текущем результате, когда парсер собирает данные и файл изображения. Следующим шагом вернусь к бренду Wago. Возможно, решение по загрузке файлов PDF также сделаю, но уже позже.

16.08.2021
Завершён парсер бренда Wago. Парсер собирает данные со страницы, изображение и файл PDF с описанием производителя. В качестве референса со списком партномеров взят прайс со случайного российского сайта.
Разработал парсеры для Hikvision и Dahua. В первом случае для сбора используется международный сайт Hikvision. Во втором случае – англоязычная или русскоязычная версия сайта dahuasecurity.com. В обоих случаях собирается изображение, текстовая информация и файл Datasheet. Англоязычный текст переводится на русский автоматически гугл-переводчиком, поэтому при внесении нужно вычитывать текст на предмет ошибок.

19.08.2021
Добавил парсер сайта англоязычного сайта UNV. Так же, как и с Hikvision, англоязычный текст переводится гугл-переводчиком. Собирается текстовая информация в файл html, файл изображения и даташит.
